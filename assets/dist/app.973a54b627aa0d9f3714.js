!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){n(2),t.exports=n(1)},function(t,e,n){"use strict";n.r(e),e.default=n.p+"style.478c8fd29b34875addce82d1b7e3ccd9.css"},function(t,e,n){"use strict";n.r(e);var r={nodes:function(t){return Array.prototype.slice.call(t instanceof Element?[t]:t)},querySelectorAll:function(t){return r.nodes(document.querySelectorAll(t))}},a=function(){function t(){var e=r.querySelectorAll("."+t.DOM.classes.section+" ."+t.DOM.classes.remove);this.bindUploadEvent(),this.bindRemoveEvent(e)}return t.prototype.bindUploadEvent=function(){var e=this;r.querySelectorAll("."+t.DOM.classes.section+" ."+t.DOM.classes.upload).map((function(n){n.addEventListener("click",(function(n){n.preventDefault();var a=n.currentTarget,i=a.closest("."+t.DOM.classes.section),s=e.getSectionId(a),o=a.hasAttribute(t.DOM.attrs.single),c=wp.media&&wp.media({title:"Select or Upload Media",button:{text:"Select"},multiple:!o});c.on("open",(function(){var e=i.querySelectorAll("."+t.DOM.classes.itemContainer);r.nodes(e).map((function(t){var e=t.getElementsByTagName("input")[0].value;c.state().get("selection").add(wp.media.attachment(e))}))})),c.on("select",(function(){var t=c.state().get("selection").models;e.renderAttachments(s,t,o)})),c.open()}))}))},t.prototype.bindRemoveEvent=function(t){var e=this;t.map((function(t){t.addEventListener("click",(function(t){t.preventDefault();var n=t.currentTarget;e.removeAttachment(n)}))}))},t.prototype.removeAttachment=function(e){var n=this.getSectionId(e),r=this.getAttachmentId(e),a="."+t.DOM.classes.section+"["+t.DOM.attrs.id+'="'+n+'"] ';a+="."+t.DOM.classes.itemContainer+"["+t.DOM.attrs.id+'="'+r+'"]';var i=document.querySelector(a);i.parentNode.removeChild(i)},t.prototype.renderAttachments=function(e,n,r){var a=this,i="."+t.DOM.classes.section+"["+t.DOM.attrs.id+'="'+e+'"] ';i+="."+t.DOM.classes.itemsContainer,document.querySelector(i).innerHTML="",n.filter((function(t,e){return!r||0===e})).forEach((function(t,n){a.renderAttachment(e,t.id,t.attributes.url,n)}))},t.prototype.renderAttachment=function(e,n,r,a){var i=document.createElement("section");i.classList.add(t.DOM.classes.itemContainer),i.setAttribute(t.DOM.attrs.id,a.toString());var s=document.createElement("input");s.setAttribute("name",e+"["+a+"]"),s.setAttribute("type","hidden"),s.value=n.toString();var o=document.createElement("div");o.classList.add("img-container"),o.setAttribute("style","background-image: url('"+r+"')");var c=document.createElement("button");c.classList.add(t.DOM.classes.remove);var u=document.createElement("span");u.classList.add("dashicons"),u.classList.add("dashicons-no"),c.appendChild(u),i.appendChild(s),i.append(o),i.append(c),this.bindRemoveEvent([c]);var l="."+t.DOM.classes.section+"["+t.DOM.attrs.id+'="'+e+'"] ';l+="."+t.DOM.classes.itemsContainer,document.querySelector(l).appendChild(i)},t.prototype.getSectionId=function(e){return e.closest("."+t.DOM.classes.section).getAttribute(t.DOM.attrs.id)},t.prototype.getAttachmentId=function(e){return e.closest("."+t.DOM.classes.attachmentBlock).getAttribute(t.DOM.attrs.id)},t.DOM={classes:{section:"wp-express.attachment",attachmentBlock:"attachment__items__item",upload:"btn-upload",remove:"btn-remove",itemsContainer:"attachment__items",itemContainer:"attachment__items__item"},attrs:{id:"data-id",single:"data-single"}},t}(),i=function(){function t(){var e=this;r.querySelectorAll("."+t.DOM.classes.itemsContainer+"["+t.DOM.attrs.multiple+"] input").map((function(t){e.bindTextEvent(t)}))}return t.prototype.bindTextEvent=function(e){var n=this;e.addEventListener("keyup",(function(a){var i=e.closest(".wp-express."+t.DOM.classes.itemsContainer),s=r.nodes(i.getElementsByTagName("input")),o=s.filter((function(t){return t.value})),c=s.length-o.length;""===e.value&&1<c?e.parentNode.removeChild(e):0===c&&n.addInput(i)}))},t.prototype.addInput=function(e){var n=parseInt(e.getAttribute(t.DOM.attrs.next),10),r=n+1;e.setAttribute(t.DOM.attrs.next,r.toString());var a=e.getElementsByTagName("input")[0].cloneNode(!0),i=e.getAttribute("data-id");a.setAttribute("name",i+"["+n+"]"),a.value="",this.bindTextEvent(a),e.append(a)},t.DOM={classes:{itemsContainer:"input__items"},attrs:{multiple:"data-multiple",next:"data-next"}},t}();document.addEventListener("DOMContentLoaded",(function(){new a,new i}))}]);